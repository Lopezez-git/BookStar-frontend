<div class="pagina-detalhes">
  <!-- Botão de Voltar -->
  <button class="btn-voltar" (click)="voltar()">← Voltar</button>

  <!-- Loading e Erro -->
  <div *ngIf="carregando" class="loading">Carregando...</div>
  <div *ngIf="erro" class="erro">{{ erro }}</div>

  <!-- Conteúdo do Livro -->
  <div *ngIf="!carregando && !erro && livro" class="conteudo">
    
    <!-- Seção Principal -->
    <div class="secao-principal">
      
      <!-- Capa do Livro -->
      <div class="capa-container">
        <img [src]="livro.capa_livro || 'assets/placeholder-book.jpg'" 
             [alt]="livro.titulo" class="capa-livro">
      </div>

      <!-- Informações e Ações -->
      <div class="info-container">
        <h1 class="titulo-livro">{{ livro.titulo }}</h1>

        <!-- Status e Ações -->
        <div class="status-icons">
          <button class="icon-btn" title="Visualizado">
            <img src="olho.png" alt="Visualizado" class="icon-img">
          </button>
          <button 
            class="icon-btn" 
            [class.active]="livroFinalizado"
            (click)="toggleFinalizado()"
            title="Marcar como concluído">
            <img src="relogio-tres.png" alt="Concluído" class="icon-img">
            <span>{{ livroFinalizado ? 'Livro concluído' : 'Marcar concluído' }}</span>
          </button>
          <button class="icon-btn" title="Favorito">
            <img src="coracao (1).png" alt="Favorito" class="icon-img">
          </button>
        </div>

        <!-- Avaliação -->
        <div class="avaliacao-section">
          <h3>Sua Avaliação</h3>
          <div class="estrelas">
            <span *ngFor="let star of getRatingArray()" 
                  class="estrela" 
                  [class.filled]="star <= (hoverRating || avaliacaoUsuario)"
                  (click)="setRating(star)"
                  (mouseenter)="setHoverRating(star)"
                  (mouseleave)="resetHoverRating()">
              ★
            </span>
          </div>
        </div>

        <!-- Descrição -->
        <div class="descricao-section">
          <h3>Sobre o Livro</h3>
          <p class="descricao">{{ livro.descricao }}</p>
        </div>
      </div>
    </div>

    <!-- Seção de Comentário -->
    <div class="secao-comentario">
      <h3>Seu Comentário</h3>
      <textarea [(ngModel)]="comentarioUsuario"
                placeholder="Escreva seu comentário aqui..."
                rows="5"
                class="comentario-input"></textarea>
      <button class="btn-salvar" (click)="salvarAvaliacao()">Salvar Avaliação</button>
    </div>

    <!-- Informações do Autor -->
    <div class="secao-autor">
      <h2>Sobre o Autor</h2>
      <div class="autor-info">
        <div class="autor-foto">
          <div class="placeholder-foto">
            <img class="autor-foto" [src]="livro.foto_autor" alt="">
          </div>
        </div>
        <div class="autor-texto">
          <h3>{{ livro.autor }}</h3>
          <p class="autor-bio">{{ livro.biografiaAutor }}</p>
        </div>
      </div>
    </div>
  </div>
</div>